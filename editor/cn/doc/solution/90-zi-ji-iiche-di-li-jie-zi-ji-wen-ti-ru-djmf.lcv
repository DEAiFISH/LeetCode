# æ€è·¯

> **å¦‚æœå¯¹å›æº¯ç®—æ³•åŸºç¡€è¿˜ä¸äº†è§£çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘çš„è§†é¢‘ï¼š[å¸¦ä½ å­¦é€å›æº¯ç®—æ³•ï¼ˆç†è®ºç¯‡ï¼‰Bç«™è§†é¢‘](https://www.bilibili.com/video/BV1cy4y167mM/)**  ç»“åˆè¿™é¢˜è§£ä¸€èµ·çœ‹ï¼Œå¸Œæœ›å¯¹ä½ ç†è§£å›æº¯ç®—æ³•æœ‰æ‰€å¸®åŠ©ï¼

å¾ˆå¤šåŒå­¦åœ¨å»é‡çš„é—®é¢˜ä¸Šæƒ³ä¸æ˜ç™½ï¼Œå…¶å®å¾ˆå¤šé¢˜è§£ä¹Ÿæ²¡æœ‰è®²æ¸…æ¥šï¼Œåæ­£ä»£ç æ˜¯èƒ½è¿‡çš„ï¼Œæ„Ÿè§‰æ˜¯é‚£ä¹ˆå›äº‹ï¼Œç¨€é‡Œç³Šæ¶‚çš„å…ˆæŠŠé¢˜ç›®è¿‡äº†ã€‚

è¿™ä¸ªå»é‡ä¸ºä»€ä¹ˆå¾ˆéš¾ç†è§£å‘¢ï¼Œ**æ‰€è°“å»é‡ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨è¿‡çš„å…ƒç´ ä¸èƒ½é‡å¤é€‰å–ã€‚** è¿™ä¹ˆä¸€è¯´å¥½åƒå¾ˆç®€å•ï¼

éƒ½çŸ¥é“ç»„åˆé—®é¢˜å¯ä»¥æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„ï¼Œé‚£ä¹ˆâ€œä½¿ç”¨è¿‡â€åœ¨è¿™ä¸ªæ ‘å½¢ç»“æ„ä¸Šæ˜¯æœ‰ä¸¤ä¸ªç»´åº¦çš„ï¼Œä¸€ä¸ªç»´åº¦æ˜¯åŒä¸€æ ‘æä¸Šä½¿ç”¨è¿‡ï¼Œä¸€ä¸ªç»´åº¦æ˜¯åŒä¸€æ ‘å±‚ä¸Šä½¿ç”¨è¿‡ã€‚**æ²¡æœ‰ç†è§£è¿™ä¸¤ä¸ªå±‚é¢ä¸Šçš„â€œä½¿ç”¨è¿‡â€ æ˜¯é€ æˆå¤§å®¶æ²¡æœ‰å½»åº•ç†è§£å»é‡çš„æ ¹æœ¬åŸå› ã€‚**

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æ˜¯è¦åŒä¸€æ ‘å±‚ä¸Šä½¿ç”¨è¿‡ï¼Œè¿˜æ˜¯ç»Ÿä¸€æ ‘æä¸Šä½¿ç”¨è¿‡å‘¢ï¼Ÿ

å›çœ‹ä¸€ä¸‹é¢˜ç›®ï¼Œå…ƒç´ åœ¨åŒä¸€ä¸ªç»„åˆå†…æ˜¯å¯ä»¥é‡å¤çš„ï¼Œæ€ä¹ˆé‡å¤éƒ½æ²¡äº‹ï¼Œä½†ä¸¤ä¸ªç»„åˆä¸èƒ½ç›¸åŒã€‚

**æ‰€ä»¥æˆ‘ä»¬è¦å»é‡çš„æ˜¯åŒä¸€æ ‘å±‚ä¸Šçš„â€œä½¿ç”¨è¿‡â€ï¼ŒåŒä¸€æ ‘æä¸Šçš„éƒ½æ˜¯ä¸€ä¸ªç»„åˆé‡Œçš„å…ƒç´ ï¼Œä¸ç”¨å»é‡**ã€‚

**å‰§é€ä¸€ä¸‹ï¼ŒåæœŸè¦è®²è§£çš„æ’åˆ—é—®é¢˜é‡Œå»é‡ä¹Ÿæ˜¯è¿™ä¸ªå¥—è·¯ï¼Œæ‰€ä»¥ç†è§£â€œæ ‘å±‚å»é‡â€å’Œâ€œæ ‘æå»é‡â€éå¸¸é‡è¦**ã€‚

ç”¨ç¤ºä¾‹ä¸­çš„[1, 2, 2] æ¥ä¸¾ä¾‹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ï¼ˆ**æ³¨æ„å»é‡éœ€è¦å…ˆå¯¹é›†åˆæ’åº**ï¼‰

![90.å­é›†II.png](https://pic.leetcode-cn.com/1604912138-sosMZx-90.%E5%AD%90%E9%9B%86II.png)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŒä¸€æ ‘å±‚ä¸Šé‡å¤å–2 å°±è¦è¿‡æ»¤æ‰ï¼ŒåŒä¸€æ ‘æä¸Šå°±å¯ä»¥é‡å¤å–2ï¼Œå› ä¸ºåŒä¸€æ ‘æä¸Šå…ƒç´ çš„é›†åˆæ‰æ˜¯å”¯ä¸€å­é›†ï¼

# C++ä»£ç 

* 

```
class Solution {
private:
    vector<vector<int>> result;
    vector<int> path;
    void backtracking(vector<int>& nums, int startIndex, vector<bool>& used) {
        result.push_back(path);
        for (int i = startIndex; i < nums.size(); i++) {
            // used[i - 1] == trueï¼Œè¯´æ˜åŒä¸€æ ‘æ”¯candidates[i - 1]ä½¿ç”¨è¿‡
            // used[i - 1] == falseï¼Œè¯´æ˜åŒä¸€æ ‘å±‚candidates[i - 1]ä½¿ç”¨è¿‡
            // è€Œæˆ‘ä»¬è¦å¯¹åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡çš„å…ƒç´ è¿›è¡Œè·³è¿‡
            if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == false) {
                continue;
            }
            path.push_back(nums[i]);
            used[i] = true;
            backtracking(nums, i + 1, used);
            used[i] = false;
            path.pop_back();
        }
    }

public:
    vector<vector<int>> subsetsWithDup(vector<int>& nums) {
        result.clear();
        path.clear();
        vector<bool> used(nums.size(), false);
        sort(nums.begin(), nums.end()); // å»é‡éœ€è¦æ’åº
        backtracking(nums, 0, used);
        return result;
    }
};
```

ä½¿ç”¨setå»é‡çš„ç‰ˆæœ¬ã€‚

* 

```
class Solution {
private:
    vector<vector<int>> result;
    vector<int> path;
    void backtracking(vector<int>& nums, int startIndex, vector<bool>& used) {
        result.push_back(path);
        unordered_set<int> uset;
        for (int i = startIndex; i < nums.size(); i++) {
            if (uset.find(nums[i]) != uset.end()) {
                continue;
            }
            uset.insert(nums[i]);
            path.push_back(nums[i]);
            backtracking(nums, i + 1, used);
            path.pop_back();
        }
    }

public:
    vector<vector<int>> subsetsWithDup(vector<int>& nums) {
        result.clear();
        path.clear();
        vector<bool> used(nums.size(), false);
        sort(nums.begin(), nums.end()); // å»é‡éœ€è¦æ’åº
        backtracking(nums, 0, used);
        return result;
    }
};

```

## è¡¥å……

æœ¬é¢˜ä¹Ÿå¯ä»¥ä¸é€‚ç”¨usedæ•°ç»„æ¥å»é‡ï¼Œå› ä¸ºé€’å½’çš„æ—¶å€™ä¸‹ä¸€ä¸ªstartIndexæ˜¯i+1è€Œä¸æ˜¯0ã€‚

å¦‚æœè¦æ˜¯å…¨æ’åˆ—çš„è¯ï¼Œæ¯æ¬¡è¦ä»0å¼€å§‹éå†ï¼Œä¸ºäº†è·³è¿‡å·²å…¥æ ˆçš„å…ƒç´ ï¼Œéœ€è¦ä½¿ç”¨usedã€‚

ä»£ç å¦‚ä¸‹ï¼š

* CPP

```CPP
class Solution {
private:
    vector<vector<int>> result;
    vector<int> path;
    void backtracking(vector<int>& nums, int startIndex) {
        result.push_back(path);
        for (int i = startIndex; i < nums.size(); i++) {
            // è€Œæˆ‘ä»¬è¦å¯¹åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡çš„å…ƒç´ è¿›è¡Œè·³è¿‡
            if (i > startIndex && nums[i] == nums[i - 1] ) { // æ³¨æ„è¿™é‡Œä½¿ç”¨i > startIndex
                continue;
            }
            path.push_back(nums[i]);
            backtracking(nums, i + 1);
            path.pop_back();
        }
    }

public:
    vector<vector<int>> subsetsWithDup(vector<int>& nums) {
        result.clear();
        path.clear();
        sort(nums.begin(), nums.end()); // å»é‡éœ€è¦æ’åº
        backtracking(nums, 0);
        return result;
    }
};
```

## æ€»ç»“

å…¶å®è¿™é“é¢˜ç›®çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ä¹‹å‰éƒ½è®²è¿‡äº†ï¼Œå¦‚æœä¹‹å‰è®²è¿‡çš„å­é›†é—®é¢˜å’Œå»é‡é—®é¢˜éƒ½æŒæ¡çš„å¥½ï¼Œè¿™é“é¢˜ç›®åº”è¯¥åˆ†åˆ†é’ŸACã€‚

å½“ç„¶æœ¬é¢˜å»é‡çš„é€»è¾‘ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆå†™

* 

```
if (i > startIndex && nums[i] == nums[i - 1] ) {
        continue;
}
```

## å…¶ä»–è¯­è¨€ç‰ˆæœ¬

Javaï¼š

* java

```java
class Solution {
   List<List<Integer>> result = new ArrayList<>();// å­˜æ”¾ç¬¦åˆæ¡ä»¶ç»“æœçš„é›†åˆ
   LinkedList<Integer> path = new LinkedList<>();// ç”¨æ¥å­˜æ”¾ç¬¦åˆæ¡ä»¶ç»“æœ
   boolean[] used;
    public List<List<Integer>> subsetsWithDup(int[] nums) {
        if (nums.length == 0){
            result.add(path);
            return result;
        }
        Arrays.sort(nums);
        used = new boolean[nums.length];
        subsetsWithDupHelper(nums, 0);
        return result;
    }
    
    private void subsetsWithDupHelper(int[] nums, int startIndex){
        result.add(new ArrayList<>(path));
        if (startIndex >= nums.length){
            return;
        }
        for (int i = startIndex; i < nums.length; i++){
            if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]){
                continue;
            }
            path.add(nums[i]);
            used[i] = true;
            subsetsWithDupHelper(nums, i + 1);
            path.removeLast();
            used[i] = false;
        }
    }
}
```

Pythonï¼š

* python3

```python
class Solution:
    def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:
        res = []  #å­˜æ”¾ç¬¦åˆæ¡ä»¶ç»“æœçš„é›†åˆ
        path = []  #ç”¨æ¥å­˜æ”¾ç¬¦åˆæ¡ä»¶ç»“æœ
        def backtrack(nums,startIndex):
            res.append(path[:])
            for i in range(startIndex,len(nums)):
                if i > startIndex and nums[i] == nums[i - 1]:  #æˆ‘ä»¬è¦å¯¹åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡çš„å…ƒç´ è¿›è¡Œè·³è¿‡
                    continue
                path.append(nums[i])
                backtrack(nums,i+1)  #é€’å½’
                path.pop()  #å›æº¯
        nums = sorted(nums)  #å»é‡éœ€è¦æ’åº
        backtrack(nums,0)
        return res
```

Goï¼š

* Go

```Go
var res[][]int
func subsetsWithDup(nums []int)[][]int {
	res=make([][]int,0)
	 sort.Ints(nums)
	dfs([]int{},nums,0)
	return res
}
func dfs(temp, num []int, start int)  {
	tmp:=make([]int,len(temp))
	copy(tmp,temp)

	res=append(res,tmp)
	for i:=start;i<len(num);i++{
		if i>start&&num[i]==num[i-1]{
			continue
		}
		temp=append(temp,num[i])
		dfs(temp,num,i+1)
		temp=temp[:len(temp)-1]
	}
}
```

Javascript:

* Javascript

```Javascript

var subsetsWithDup = function(nums) {
    let result = []
    let path = []
    let sortNums = nums.sort((a, b) => {
        return a - b
    })
    function backtracing(startIndex, sortNums) {
        result.push(path.slice(0))
        if(startIndex > nums.length - 1) {
            return
        }
        for(let i = startIndex; i < nums.length; i++) {
            if(i > startIndex && nums[i] === nums[i - 1]) {
                continue
            }
            path.push(nums[i])
            backtracing(i + 1, sortNums)
            path.pop()
        }
    }
    backtracing(0, sortNums)
    return result
};

```

# å›æº¯ç®—æ³•åŠ›æ‰£é¢˜ç›®æ€»ç»“

æŒ‰ç…§å¦‚ä¸‹é¡ºåºåˆ·åŠ›æ‰£ä¸Šçš„é¢˜ç›®ï¼Œç›¸ä¿¡ä¼šå¸®ä½ åœ¨å­¦ä¹ å›æº¯ç®—æ³•çš„è·¯ä¸Šå°‘èµ°å¾ˆå¤šå¼¯è·¯ã€‚

* [å…³äºå›æº¯ç®—æ³•ï¼Œä½ è¯¥äº†è§£è¿™äº›ï¼](https://programmercarl.com/å›æº¯ç®—æ³•ç†è®ºåŸºç¡€.html)
* ç»„åˆé—®é¢˜
  * [77.ç»„åˆ](https://programmercarl.com/0077.ç»„åˆ.html)
  * [216.ç»„åˆæ€»å’ŒIII](https://programmercarl.com/0216.ç»„åˆæ€»å’ŒIII.html)
  * [17.ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://programmercarl.com/0017.ç”µè¯å·ç çš„å­—æ¯ç»„åˆ.html)
  * [39.ç»„åˆæ€»å’Œ](https://programmercarl.com/0039.ç»„åˆæ€»å’Œ.html)
  * [40.ç»„åˆæ€»å’ŒII](https://programmercarl.com/0040.ç»„åˆæ€»å’ŒII.html)
* åˆ†å‰²é—®é¢˜
  * [131.åˆ†å‰²å›æ–‡ä¸²](https://programmercarl.com/0131.åˆ†å‰²å›æ–‡ä¸².html)
  * [93.å¤åŸIPåœ°å€](https://programmercarl.com/0093.å¤åŸIPåœ°å€.html)
* å­é›†é—®é¢˜
  * [78.å­é›†](https://programmercarl.com/0078.å­é›†.html)
  * [90.å­é›†II](https://programmercarl.com/0090.å­é›†II.html)
* æ’åˆ—é—®é¢˜
  * [46.å…¨æ’åˆ—](https://programmercarl.com/0046.å…¨æ’åˆ—.html)
  * [47.å…¨æ’åˆ—II](https://programmercarl.com/0047.å…¨æ’åˆ—II.html)
* æ£‹ç›˜é—®é¢˜
  * [51.Nçš‡å](https://programmercarl.com/0051.Nçš‡å.html)
  * [37.è§£æ•°ç‹¬](https://programmercarl.com/0037.è§£æ•°ç‹¬.html)
* å…¶ä»–
  * [491.é€’å¢å­åºåˆ—](https://programmercarl.com/0491.é€’å¢å­åºåˆ—.html)
  * [332.é‡æ–°å®‰æ’è¡Œç¨‹](https://programmercarl.com/0332.é‡æ–°å®‰æ’è¡Œç¨‹.html)
* [å›æº¯ç®—æ³•æ€»ç»“ç¯‡](https://programmercarl.com/å›æº¯æ€»ç»“.html)

-----------

**å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜Carlï¼Œç‚¹å‡»[æˆ‘çš„å¤´åƒ](https://mp.weixin.qq.com/s/_DzddsMeQW5JPI6qoC7ARQ)**ï¼ŒæŸ¥çœ‹åŠ›æ‰£è¯¦ç»†åˆ·é¢˜æ”»ç•¥ï¼Œä½ ä¼šå‘ç°ç›¸è§æ¨æ™šï¼

**å¦‚æœæ„Ÿè§‰é¢˜è§£å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦åå•¬ç»™ä¸€ä¸ªğŸ‘å§ï¼**
